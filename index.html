<!DOCTYPE html>
<html>
<head>
  <title>CS 498 Final Project</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega/3.0.0-rc2/vega.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-lite/2.0.0-beta.10/vega-lite.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vega-embed/3.0.0-beta.19/vega-embed.js"></script>
 
</head>
<body>

<div id="option">
    <input name="About" 
           type="button" 
           value="About This Visualization" 
           onclick="about()" />
    <input name="Slide0Button" 
           type="button" 
           value="Slide 0" 
           onclick="slide0()" />
    <input name="Slide1Button" 
           type="button" 
           value="Slide 1" 
           onclick="slide1()" />	
    <input name="Slide2Button" 
           type="button" 
           value="Slide 2" 
           onclick="slide2()" />	
    <input name="Slide3Button" 
           type="button" 
           value="Slide 3" 
           onclick="slide3()" />		   
    <input name="EndButton" 
           type="button" 
           value="End" 
           onclick="slide4()" />		   
</div>

<textarea id="textBox1" rows="10" cols="90" style ="border:none">
Instructions:

(1) Please click the buttons above to navigate through this narrative visualization.

(2) Please hover your mouse over the bars below to get the exact number of customers by category.

(3) To compare across the histogram bars, please select in the drop-down box under the histogram. 
</textarea>

<div id="list">
  <p><iframe src="https://panwong126.github.io/test1.html" frameborder="0" height="400"
      width="95%"></iframe></p>
</div>





<p id="myspan" style ="color:blue;font-weight:bold; font-size:18pt"> </p>
<div id="vis"></div>
 
<script type="text/javascript">

//  "data": { "url": "https://raw.githubusercontent.com/panwong126/panwong126.github.io/master/data.json"},

var slide_0 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
  "data": { "url": "https://raw.githubusercontent.com/panwong126/panwong126.github.io/master/data.json"},
  "width":600,
  "height":600,
  "mark": "bar",
  "encoding": {
    "x": {
      "field": "shopping_pt",
      "type": "nominal",
	  "axis": {"title": "# of Quotes Before Buying Insurance"}	  
    },
    "y": {
      "aggregate": "count",
      "type": "quantitative",
      "axis": {"title": "# of Customers"}
    },
	"tooltip": {"aggregate": "count", "type": "quantitative"}
  },
}


var slide_1 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
  "data": { "url": "https://raw.githubusercontent.com/panwong126/panwong126.github.io/master/data.json"},
  "width":600,
  "height":600,
  "layer":[{
	"selection": {
		"parameter": {
		"type": "single",
		"fields": ["car_value"],
		"bind": {"input": "select", "options":["a","b","c","d","e","f","g","h","i"]}
		}
	},
	"mark": "bar",
	"encoding": {
    "y": {"aggregate": "count", "type": "quantitative","axis": {"title": "# of Customers"}},
    "x": {"field": "shopping_pt", "type": "nominal","axis": {"title": "# of Quotes Before Buying Insurance"}	  },
    "color": {
	  "value": "grey"
	},
	"tooltip": {"aggregate": "count", "type": "quantitative"}
  }
},{
    "transform": [{"filter": {"selection": "parameter"}}],
    "mark": "bar",
    "encoding": {
      "x": {"field": "shopping_pt", "type": "nominal"},
      "y": {"aggregate": "count", "type": "quantitative"},
      "color": {"field": "car_value", "type": "nominal"},
	  "tooltip": {"aggregate": "count", "type": "quantitative"}
    }
  }]}

var slide_2 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
  "data": { "url": "https://raw.githubusercontent.com/panwong126/panwong126.github.io/master/data.json"},
  "width":600,
  "height":600,
  "layer":[{
	"selection": {
		"parameter": {
		"type": "single",
		"fields": ["homeowner"],
		"bind": {"input": "select", "options":[0,1]}
		}
	},
	"mark": "bar",
	"encoding": {
    "y": {"aggregate": "count", "type": "quantitative","axis": {"title": "# of Customers"}},
    "x": {"field": "shopping_pt", "type": "nominal","axis": {"title": "# of Quotes Before Buying Insurance"}	  },
    "color": {
	  "value": "grey"
	},
	"tooltip": {"aggregate": "count", "type": "quantitative"}
  }
},{
    "transform": [{"filter": {"selection": "parameter"}}],
    "mark": "bar",
    "encoding": {
      "x": {"field": "shopping_pt", "type": "nominal"},
      "y": {"aggregate": "count", "type": "quantitative"},
      "color": {"field": "homeowner", "type": "nominal","value": "steelblue"},
	  "tooltip": {"aggregate": "count", "type": "quantitative"}
    }
  }]}

var slide_3 = {
  "$schema": "https://vega.github.io/schema/vega-lite/v2.json",
  "data": { "url": "https://raw.githubusercontent.com/panwong126/panwong126.github.io/master/data.json"},
  "width":600,
  "height":600,
  "layer":[{
	"selection": {
		"parameter": {
		"type": "single",
		"fields": ["married_couple"],
		"bind": {"input": "select", "options":[0,1]}
		}
	},
	"mark": "bar",
	"encoding": {
    "y": {"aggregate": "count", "type": "quantitative","axis": {"title": "# of Customers"}},
    "x": {"field": "shopping_pt", "type": "nominal","axis": {"title": "# of Quotes Before Buying Insurance"}	  },
    "color": {
	  "value": "grey"
	},
	"tooltip": {"aggregate": "count", "type": "quantitative"}
  }
},{
    "transform": [{"filter": {"selection": "parameter"}}],
    "mark": "bar",
    "encoding": {
      "x": {"field": "shopping_pt", "type": "nominal"},
      "y": {"aggregate": "count", "type": "quantitative"},
      "color": {"field": "married_couple", "type": "nominal","value": "steelblue"},
	  "tooltip": {"aggregate": "count", "type": "quantitative"}
    }
  }]}

function about(){

}
  
function slide0(){
	document.getElementById("myspan").innerHTML="Slide 0 - Distribution of Customers by # of Insurance Quotes";
	vega.embed("#vis", slide_0);
	document.getElementById("textBox1").cols = "200";
}
  
function slide1(){
	document.getElementById("myspan").innerHTML="Slide 1 - Segmenting Customers by Car Value";
	vega.embed("#vis", slide_1)
}

function slide2(){
	document.getElementById("myspan").innerHTML="Slide 2 - Segmenting Customers by Homeownership";
	vega.embed("#vis", slide_2)
}

function slide3(){
	document.getElementById("myspan").innerHTML="Slide 3 - Segmenting Customers by Marital Status";
	vega.embed("#vis", slide_3)
}

function slide4(){
	alert("Thanks for watching this narrative visualization.")
}

function load1() {
    var file = new XMLHttpRequest();
    file.open("GET", "http://remote.tld/random.txt", true);
    file.onreadystatechange = function() {
      if (file.readyState === 4) {  // Makes sure the document is ready to parse
        if (file.status === 200) {  // Makes sure it's found the file
          text = file.responseText;
          document.getElementById("div1").innerHTML = text;
        }
      }
    }
}

function load2() {
    var file = new XMLHttpRequest();
    file.open("GET", "http://remote.tld/random.txt", true);
    file.onreadystatechange = function() {
      if (file.readyState === 4) {  // Makes sure the document is ready to parse
        if (file.status === 200) {  // Makes sure it's found the file
          text = file.responseText;
          document.getElementById("div1").innerHTML = text;
        }
      }
    }
}

	
  </script>
</body>
</html>